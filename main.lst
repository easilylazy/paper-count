C51 COMPILER V9.00   MAIN                                                                  03/29/2021 22:31:21 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\output\main.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE src\main.c BROWSE DEBUG OBJECTEXTEND PRINT(.\main.lst) OBJECT(.\output\main
                    -.obj)

line level    source

   1          #include <reg52.h>
   2          # include "include/utils.h"
   3          uchar flag,a,i;
   4          unsigned int beat;
   5          
   6          
   7          //sbit led1=P1^0 ;
   8          sbit watch=P1^2;
   9          sbit input=P3^7;
  10          sbit ticker=P0^0;       
  11          void init(){
  12   1              TMOD=0X25;               //T1 TIMER T0 COUNT
  13   1              TH1=0XFD;
  14   1              TL1=0XFD;
  15   1      
  16   1              RCAP2H=0X004C;
  17   1              RCAP2L=0X0000;
  18   1              resetT0();
  19   1              TR2=1;
  20   1              TR1=1;
  21   1              TR0=1;
  22   1              REN=1;
  23   1              SM0=0;
  24   1              SM1=1;
  25   1              EA=1;
  26   1              ES=1;
  27   1      
  28   1              ET2=1;
  29   1      
  30   1      }
  31          
  32          
  33          
  34          void watchChange(){
  35   1              
  36   1              if(input==0){
  37   2                       sleep(10);
  38   2                       if(input==0){
  39   3                              watch=~watch;
  40   3                              while(!input); // wait for key 
  41   3                              watch=~watch;
  42   3                       }      
  43   2              }
  44   1      
  45   1      }
  46          void main(void){
  47   1              unsigned int last_beat=0;
  48   1              init();
  49   1              flag=0;
  50   1              
  51   1              while(1){
  52   2                      //led1=0;
  53   2                      watchChange();
  54   2                      if (flag==1){
C51 COMPILER V9.00   MAIN                                                                  03/29/2021 22:31:21 PAGE 2   

  55   3                              ES=0;
  56   3                              processInput(a);
  57   3                              
  58   3                              SBUF=a;
  59   3                              while(!TI);
  60   3                              TI=0;
  61   3                              
  62   3                              ES=1;
  63   3                              flag=0;
  64   3      
  65   3                      }
  66   2                      if(last_beat!=beat&&beat%20==1){
  67   3                              ES=0;
  68   3                              if(beat%1200==1){
  69   4                                      SBUF='&';
  70   4                                      while(!TI);
  71   4                                      TI=0;
  72   4                              }
  73   3                              SBUF='*';
  74   3                              while(!TI);
  75   3                              TI=0;
  76   3                              ES=1;
  77   3                              last_beat=beat;
  78   3                      }
  79   2      
  80   2              }
  81   1      }       
  82          void refresh() interrupt 4{
  83   1      
  84   1              RI=0;
  85   1              a=SBUF;
  86   1              flag=1;
  87   1                       
  88   1      }       
  89          
  90          void timer_50ms() interrupt 5{
  91   1      
  92   1              TF2=0;
  93   1              beat++;  
  94   1      
  95   1      }
*** WARNING C316 IN LINE 95 OF src\main.c: unterminated conditionals


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    220    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      8       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
