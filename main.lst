C51 COMPILER V9.00   MAIN                                                                  03/29/2021 20:09:59 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\output\main.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE src\main.c BROWSE DEBUG OBJECTEXTEND PRINT(.\main.lst) OBJECT(.\output\main
                    -.obj)

line level    source

   1          #include <reg52.h>
   2          
   3          #define uchar unsigned char
   4          uchar flag,a,i;
   5          uchar code table[]="Got it";   
   6          uchar code reset[]="RESET";
   7          
   8          
   9          sbit led1=P1^0 ;
  10          sbit watch=P1^2;
  11          sbit input=P3^7;
  12          void resetT0(){
  13   1              //T0
  14   1              TH0=0X00;
  15   1              TL0=0X00;
  16   1      }       
  17          void init(){
  18   1              TMOD=0X25;               //T1 TIMER T0 COUNT
  19   1              TH1=0XFD;
  20   1              TL1=0XFD;
  21   1              resetT0();
  22   1              TR1=1;
  23   1              TR0=1;
  24   1              REN=1;
  25   1              SM0=0;
  26   1              SM1=1;
  27   1              EA=1;
  28   1              ES=1;
  29   1      
  30   1      }
  31          
  32          void sleep(unsigned int xms){
  33   1              unsigned int i,j;
  34   1              for(i=0;i<xms;i++){
  35   2                      for(j=0;j<110;j++){
  36   3                              ;
  37   3                      }
  38   2              }
  39   1      }
  40          
  41          void watchChange(){
  42   1              
  43   1              if(input==0){
  44   2                       sleep(10);
  45   2                       if(input==0){
  46   3                              watch=~watch;
  47   3                              while(!input); // wait for key 
  48   3                              watch=~watch;
  49   3                       }      
  50   2              }
  51   1      
  52   1      }
  53          void main(void){
  54   1              init();
C51 COMPILER V9.00   MAIN                                                                  03/29/2021 20:09:59 PAGE 2   

  55   1              flag=0;
  56   1              while(1){
  57   2                      led1=0;
  58   2                      watchChange();
  59   2                      if (flag==1){
  60   3                              ES=0;
  61   3                              if (a=='r'){                            
  62   4                                      for(i=0;i<5;i++){
  63   5                                              SBUF=reset[i];
  64   5                                              while(!TI);
  65   5                                              TI=0;
  66   5                                              
  67   5                                      }
  68   4                                      resetT0();
  69   4                                      
  70   4                              }  else if (a=='d'){    
  71   4                                      uchar high_byte,low_byte;
  72   4                                      high_byte=TL0%256;
  73   4                                      low_byte=TL0/256;                       
  74   4                                      SBUF=high_byte;
  75   4                                      while(!TI);
  76   4                                      TI=0;
  77   4                                      SBUF=low_byte;
  78   4                                      while(!TI);
  79   4                                      TI=0;
  80   4                                      
  81   4                              }else {
  82   4                                      for(i=0;i<6;i++){
  83   5                                              SBUF=table[i];
  84   5                                              while(!TI);
  85   5                                              TI=0;
  86   5                                      }                       
  87   4                              }
  88   3                              SBUF=a;
  89   3                              while(!TI);
  90   3                              TI=0;
  91   3      
  92   3                              
  93   3                              ES=1;
  94   3                              flag=0;
  95   3      
  96   3      
  97   3                      }
  98   2      
  99   2              }
 100   1      }       
 101          void refresh() interrupt 4{
 102   1      
 103   1              RI=0;
 104   1              a=SBUF;
 105   1              flag=1;
 106   1              
 107   1      
 108   1               
 109   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    216    ----
   CONSTANT SIZE    =     13    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
C51 COMPILER V9.00   MAIN                                                                  03/29/2021 20:09:59 PAGE 3   

   DATA SIZE        =      3       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
